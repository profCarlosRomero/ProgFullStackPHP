<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego - PokeCard</title>
    <link rel="stylesheet" href="assets/style.tablero.css">
    <link rel="stylesheet" href="assets/style.header.css">
</head>

<body>
    <header>
        <nav class="top-nav">
            <a href="index.php" class="nav-icon"><img src="https://cdn-icons-png.flaticon.com/512/25/25694.png"
                    alt="Home"></a>
            <a href="#" class="nav-icon"><img src="https://cdn-icons-png.flaticon.com/512/31/31924.png"
                    alt="Calendar"></a>
            <a href="#" class="nav-icon"><img src="https://cdn-icons-png.flaticon.com/512/12/12711.png" alt="Bag"></a>
            <a href="#" class="nav-icon"><img src="https://cdn-icons-png.flaticon.com/512/107/107796.png"
                    alt="Heart"></a>
        </nav>
    </header>


    <main class="main-container">
        <div class="player-section">
            <h2 class="player-name">Yenny</h2>
            <div class="card-row">
                <div class="card">
                    <img src="https://assets.pokemon.com/assets/cms2/img/pokedex/full/001.png" alt="Bulbasaur"
                        class="card-image">
                    <span class="card-name">Bulbasaur</span>
                </div>
                <div class="card">
                    <img src="https://assets.pokemon.com/assets/cms2/img/pokedex/full/001.png" alt="Bulbasaur"
                        class="card-image">
                    <span class="card-name">Bulbasaur</span>
                </div>
                <div class="card">
                    <img src="https://assets.pokemon.com/assets/cms2/img/pokedex/full/001.png" alt="Bulbasaur"
                        class="card-image">
                    <span class="card-name">Bulbasaur</span>
                </div>
            </div>
        </div>

        <div class="game-board">
        </div>

        <div class="player-section">
            <h2 class="player-name">Omar</h2>
            <div class="card-row">
                <div class="card">
                    <img src="https://assets.pokemon.com/assets/cms2/img/pokedex/full/001.png" alt="Bulbasaur"
                        class="card-image">
                    <span class="card-name">Bulbasaur</span>
                </div>
                <div class="card">
                    <img src="https://assets.pokemon.com/assets/cms2/img/pokedex/full/001.png" alt="Bulbasaur"
                        class="card-image">
                    <span class="card-name">Bulbasaur</span>
                </div>
                <div class="card">
                    <img src="https://assets.pokemon.com/assets/cms2/img/pokedex/full/001.png" alt="Bulbasaur"
                        class="card-image">
                    <span class="card-name">Bulbasaur</span>
                </div>
            </div>
        </div>
    </main>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const cards = document.querySelectorAll(".card");
            const gameBoard = document.querySelector(".game-board");

            // 1. Hacer cada card arrastrable
            cards.forEach(card => {
                card.setAttribute("draggable", true);

                card.addEventListener("dragstart", (e) => {
                    // Guardamos info de la card y de quÃ© jugador viene
                    const parentPlayer = card.closest(".player-section");
                    const playerName = parentPlayer.querySelector(".player-name").textContent;

                    e.dataTransfer.setData("text/plain", JSON.stringify({
                        name: card.querySelector(".card-name").textContent,
                        img: card.querySelector(".card-image").src,
                        player: playerName
                    }));
                });
            });

            // 2. Permitir drop
            gameBoard.addEventListener("dragover", (e) => {
                e.preventDefault();
            });

            // 3. Manejar drop
            gameBoard.addEventListener("drop", (e) => {
                e.preventDefault();
                const data = JSON.parse(e.dataTransfer.getData("text/plain"));

                const newCard = document.createElement("div");
                newCard.classList.add("card");

                const img = document.createElement("img");
                img.src = data.img;
                img.alt = data.name;
                img.classList.add("card-image");

                const span = document.createElement("span");
                span.textContent = data.name;
                span.classList.add("card-name");

                newCard.appendChild(img);
                newCard.appendChild(span);

                // Posicionamiento centrado solo si viene del jugador de arriba (top)
                if (data.player === "Yenny") {
                    newCard.style.position = "absolute";
                    newCard.style.top = "10px"; // margen desde arriba
                    newCard.style.left = "50%";
                    newCard.style.transform = "translateX(-50%)"; // centrar horizontalmente
                }

                if (data.player === "Omar") {
                    newCard.style.position = "absolute";
                    newCard.style.bottom = "10px"; // margen desde arriba
                    newCard.style.left = "50%";
                    newCard.style.transform = "translateX(-50%)"; // centrar horizontalmente
                }

                gameBoard.appendChild(newCard);
            });

            // Hacer que gameBoard sea relativo para que las cards absolutas se posicionen dentro
            gameBoard.style.position = "relative";
        });
    </script>


</body>

</html>